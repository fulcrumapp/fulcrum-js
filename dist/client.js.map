{"version":3,"sources":["../src/client.js"],"names":["VERSION","require","version","BASE_URL","Client","token","opts","_opts","baseUrl","options","baseURI","headers","userAgent","tokenOptions","Object","assign","noTokenOptions","api","Fetcher","noTokenApi","path","base","urlFromPath","func","registerAuthenticationErrorHandler","_forms","Form","_records","Record","_changesets","Changeset","_choiceLists","ChoiceList","_classificationSets","ClassificationSet","_authorizations","Authorization","_memberships","Membership","_projects","Project","_layers","Layer","_photos","Photo","_videos","Video","_audio","Audio","_roles","Role","_webhooks","Webhook","_query"],"mappings":"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","file":"client.js","sourcesContent":["import Fetcher from './fetcher';\n\nimport Form from './resources/form';\nimport Record from './resources/record';\nimport Changeset from './resources/changeset';\nimport ChoiceList from './resources/choice-list';\nimport ClassificationSet from './resources/classification-set';\nimport Authorization from './resources/authorization';\nimport Membership from './resources/membership';\nimport Project from './resources/project';\nimport Layer from './resources/layer';\nimport Photo from './resources/photo';\nimport Video from './resources/video';\nimport Audio from './resources/audio';\nimport Role from './resources/role';\nimport Webhook from './resources/webhook';\nimport query from './resources/query';\n\nconst VERSION = require('../package.json').version;\n\nconst BASE_URL = 'https://api.fulcrumapp.com/api/v2';\n\nexport default class Client {\n  constructor(token, opts) {\n    const _opts = opts || {};\n\n    this.baseUrl = _opts.baseUrl || BASE_URL;\n\n    this.version = VERSION;\n\n    const options = {\n      baseURI: this.baseUrl,\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'User-Agent': _opts.userAgent || `fulcrum-js version ${VERSION}`\n      }\n    };\n\n    const tokenOptions = Object.assign({}, options);\n    tokenOptions.headers['X-ApiToken'] = token;\n    const noTokenOptions = Object.assign({}, options);\n\n    this.api = new Fetcher(tokenOptions);\n    this.noTokenApi = new Fetcher(noTokenOptions);\n  }\n\n  urlFromPath(path, base) {\n    return (base || this.baseUrl) + '/' + path;\n  }\n\n  url(path, base) {\n    return this.urlFromPath(path, base);\n  }\n\n  get forms() {\n    if (!this._forms) {\n      this._forms = new Form(this);\n    }\n    return this._forms;\n  }\n\n  get records() {\n    if (!this._records) {\n      this._records = new Record(this);\n    }\n    return this._records;\n  }\n\n  get changesets() {\n    if (!this._changesets) {\n      this._changesets = new Changeset(this);\n    }\n    return this._changesets;\n  }\n\n  get choiceLists() {\n    if (!this._choiceLists) {\n      this._choiceLists = new ChoiceList(this);\n    }\n    return this._choiceLists;\n  }\n\n  get classificationSets() {\n    if (!this._classificationSets) {\n      this._classificationSets = new ClassificationSet(this);\n    }\n    return this._classificationSets;\n  }\n\n  get authorizations() {\n    if (!this._authorizations) {\n      this._authorizations = new Authorization(this);\n    }\n    return this._authorizations;\n  }\n\n  get memberships() {\n    if (!this._memberships) {\n      this._memberships = new Membership(this);\n    }\n    return this._memberships;\n  }\n\n  get projects() {\n    if (!this._projects) {\n      this._projects = new Project(this);\n    }\n    return this._projects;\n  }\n\n  get layers() {\n    if (!this._layers) {\n      this._layers = new Layer(this);\n    }\n    return this._layers;\n  }\n\n  get photos() {\n    if (!this._photos) {\n      this._photos = new Photo(this);\n    }\n    return this._photos;\n  }\n\n  get videos() {\n    if (!this._videos) {\n      this._videos = new Video(this);\n    }\n\n    return this._videos;\n  }\n\n  get audio() {\n    if (!this._audio) {\n      this._audio = new Audio(this);\n    }\n\n    return this._audio;\n  }\n\n  get roles() {\n    if (!this._roles) {\n      this._roles = new Role(this);\n    }\n\n    return this._roles;\n  }\n\n  get webhooks() {\n    if (!this._webhooks) {\n      this._webhooks = new Webhook(this);\n    }\n\n    return this._webhooks;\n  }\n\n  get query() {\n    if (!this._query) {\n      this._query = query(this);\n    }\n\n    return this._query;\n  }\n\n  registerAuthenticationErrorHandler(func) {\n    this.api.registerAuthenticationErrorHandler(func);\n  }\n}\n"]}